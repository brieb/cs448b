<html>
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <meta http-equiv="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta http-equiv="Cache-Control" content="no-cache">
  <title>College Map</title>
  <script type="text/javascript" src="d3/d3.js"></script>
  <script type="text/javascript" src="d3/d3.geo.js"></script> 
  <script type="text/javascript" src="d3/d3.geom.js"></script> 
  <style type="text/css">
    body {
      font: 14px sans-serif;
      color:black;
    }   
    #states {
      stroke: #fff;
      fill: #ddd;
      stroke-width: 1.5px;
    }   
    #colleges {
      fill: #000;
      stroke-width: 0px;
    }
    .selector {
      fill-opacity: 0;
      stroke-width: 3px;
      stroke: #555;
    }
    .collegePoint {
      fill: #111;
      stroke: #fff;
      opacity: 0.3;
    }
    .text {
      type: "hidden";
    }
  </style>
</head>
<body>
  <div id="chart1"> </div>
  <div id="chart2"> </div>
  <script type="text/javascript" src="map.js"></script>
  <script type="text/javascript" src="demCharts.js"></script>
  <!--  <script type="text/javascript" src="numStudentsChart.js"></script> -->
  <!--  <script type="text/javascript" src="studentFacultyChart.js"></script> -->
  <script type="text/javascript">
    // var data = [{"id":"3387","name":"Stanford University","url":"www.stanford.edu","address":"Stanford, CA 94305","faculty_to_student_ratio":"6:1","num_grad":"12595","num_undergrad":"6940","percent_admitted":"7","calendar":"Quarter"}, 
    // {"id":"1251","name":"Harvard College","url":"www.college.harvard.edu","address":"86 Brattle Street Cambridge, MA 02138","faculty_to_student_ratio":"7:1","num_grad":"3942","num_undergrad":"6641","percent_admitted":"7","calendar":"Semester"}];

    var data; 
    var svg;
    // var brush = d3.svg.brush()
    //   //.on("brushstart", brushstart)
    //   .on("brush", brush);
    //   //.on("brushend", brushend);
  
    // // Clear the previously-active brush, if any.
    // function brushstart(p) {
    //   if (brush.data !== p) {

    //     cell.call(brush.clear());
    //     brush.x(x[p.x]).y(y[p.y]).data = p;
    //   }
    // }

    // // Highlight the selected circles.
    // function brush(p) {
    //   var e = brush.extent();
    //   svg.selectAll("circle").attr("class", function(d) {
    //     return e[0][0] <= d[p.x] && d[p.x] <= e[1][0]
    //         && e[0][1] <= d[p.y] && d[p.y] <= e[1][1]
    //         ? d.species : null;
    //   });
    // }

    // If the brush is empty, select all circles.
    // function brushend() {
    //   if (brush.empty()) svg.selectAll("circle").attr("class", function(d) {
    //     return d.species;
    //   });
    // }
    var drawCharts = function(json) {
      data = json;
      // drawMap('#chart1');
      console.log('got json, drawing chart for');
      console.log(json[10]);
      drawGPAChart('#chart1',json[10])
      // drawStudentChart();
      // drawStudentFacultyChart();
    }

    var drawDemCharts = function(json) {
      // console.log('got json, drawing chart for');
      // console.log(json);
      drawGPAChart('#chart1',json)
      drawRankChart('#chart2',json)
    }
      
    // d3.json('../../../~bbunge/cgi-bin/cs448b/api/college.php?', drawCharts)
    d3.json('../../../~bbunge/cgi-bin/cs448b/api/college.php?id=3387', drawDemCharts)
  </script>
</body>
</html>